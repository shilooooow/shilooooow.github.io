<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>學期與學年成績計算器</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            justify-content: center;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            flex: 1;
            min-width: 300px;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #4b6cb7;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-title i {
            color: #4b6cb7;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        label {
            font-weight: 600;
            color: #34495e;
            flex: 1;
            min-width: 120px;
        }
        
        input, select {
            flex: 2;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
            min-width: 150px;
        }
        
        input:focus, select:focus {
            border-color: #4b6cb7;
            outline: none;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.2);
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
        }
        
        .calculate-btn {
            background-color: #4b6cb7;
            color: white;
        }
        
        .calculate-btn:hover {
            background-color: #3a5795;
            transform: translateY(-3px);
        }
        
        .reset-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .reset-btn:hover {
            background-color: #c0392b;
            transform: translateY(-3px);
        }
        
        .result-box {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border-left: 5px solid #4b6cb7;
        }
        
        .result-title {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4b6cb7;
            margin: 10px 0;
        }
        
        .result-note {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 10px;
        }
        
        .prediction-image {
            width: 100%;
            height: 200px;
            background-color: #f0f2f5;
            border-radius: 8px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 2px dashed #bdc3c7;
        }
        
        .prediction-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .image-placeholder {
            text-align: center;
            color: #7f8c8d;
            padding: 20px;
        }
        
        .image-placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #bdc3c7;
        }
        
        .prediction-info {
            background-color: #fff9e6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 5px solid #f1c40f;
        }
        
        .warning {
            color: #e74c3c;
            font-weight: 600;
        }
        
        .success {
            color: #27ae60;
            font-weight: 600;
        }
        
        .info {
            color: #3498db;
            font-weight: 600;
        }
        
        .hint {
            font-size: 0.9rem;
            color: #7f8c8d;
            font-style: italic;
            margin-top: 5px;
        }
        
        .semester-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .semester-option {
            flex: 1;
            min-width: 140px;
        }
        
        .semester-option input[type="radio"] {
            display: none;
        }
        
        .semester-option label {
            display: block;
            padding: 15px;
            background-color: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .semester-option input[type="radio"]:checked + label {
            background-color: #4b6cb7;
            color: white;
            border-color: #4b6cb7;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .card {
                width: 100%;
            }
            
            .input-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            label {
                margin-bottom: 5px;
            }
            
            input, select {
                width: 100%;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .semester-option {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-calculator"></i> 學期與學年成績計算器</h1>
        <p>計算學期總成績、學年總成績，並預測下次段考所需分數，幫助您規劃學習目標</p>
    </div>
    
    <div class="container">
        <!-- 第一學期成績計算卡 -->
        <div class="card">
            <h2 class="card-title"><i class="fas fa-school"></i> 第一學期成績</h2>
            
            <div class="input-group">
                <div class="input-row">
                    <label for="exam1_1">第一次段考分數：</label>
                    <input type="number" id="exam1_1" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="exam1_2">第二次段考分數：</label>
                    <input type="number" id="exam1_2" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="exam1_3">第三次段考分數：</label>
                    <input type="number" id="exam1_3" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="usual1_1">第一次平時成績：</label>
                    <input type="number" id="usual1_1" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="usual1_2">第二次平時成績：</label>
                    <input type="number" id="usual1_2" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="usual1_3">第三次平時成績：</label>
                    <input type="number" id="usual1_3" min="0" max="100" placeholder="輸入0-100">
                </div>
            </div>
            
            <div class="buttons">
                <button class="calculate-btn" id="calcSemester1">
                    <i class="fas fa-calculator"></i> 計算第一學期成績
                </button>
                <button class="reset-btn" id="resetSemester1">
                    <i class="fas fa-redo"></i> 重設
                </button>
            </div>
            
            <div class="result-box" id="resultSemester1">
                <div class="result-title">第一學期總成績</div>
                <div class="result-value">--</div>
                <div class="result-note">計算公式：(三次段考平均 × 72%) + (三次平時平均 × 28%)</div>
            </div>
        </div>
        
        <!-- 第二學期成績計算卡 -->
        <div class="card">
            <h2 class="card-title"><i class="fas fa-school"></i> 第二學期成績</h2>
            
            <div class="input-group">
                <div class="input-row">
                    <label for="exam2_1">第一次段考分數：</label>
                    <input type="number" id="exam2_1" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="exam2_2">第二次段考分數：</label>
                    <input type="number" id="exam2_2" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="exam2_3">第三次段考分數：</label>
                    <input type="number" id="exam2_3" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="usual2_1">第一次平時成績：</label>
                    <input type="number" id="usual2_1" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="usual2_2">第二次平時成績：</label>
                    <input type="number" id="usual2_2" min="0" max="100" placeholder="輸入0-100">
                </div>
                
                <div class="input-row">
                    <label for="usual2_3">第三次平時成績：</label>
                    <input type="number" id="usual2_3" min="0" max="100" placeholder="輸入0-100">
                </div>
            </div>
            
            <div class="buttons">
                <button class="calculate-btn" id="calcSemester2">
                    <i class="fas fa-calculator"></i> 計算第二學期成績
                </button>
                <button class="reset-btn" id="resetSemester2">
                    <i class="fas fa-redo"></i> 重設
                </button>
            </div>
            
            <div class="result-box" id="resultSemester2">
                <div class="result-title">第二學期總成績</div>
                <div class="result-value">--</div>
                <div class="result-note">計算公式：(三次段考平均 × 72%) + (三次平時平均 × 28%)</div>
            </div>
        </div>
        
        <!-- 學年成績與預測卡 -->
        <div class="card">
            <h2 class="card-title"><i class="fas fa-chart-line"></i> 學年成績與下次考試預測</h2>
            
            <div class="input-group">
                <!-- 選擇要預測哪個學期 -->
                <div class="semester-selector">
                    <div class="semester-option">
                        <input type="radio" id="predictSemester1" name="predictSemester" value="1" checked>
                        <label for="predictSemester1">預測第一學期</label>
                    </div>
                    <div class="semester-option">
                        <input type="radio" id="predictSemester2" name="predictSemester" value="2">
                        <label for="predictSemester2">預測第二學期</label>
                    </div>
                </div>
                
                <div class="input-row">
                    <label for="targetGrade">學期目標分數：</label>
                    <input type="number" id="targetGrade" min="0" max="100" value="60" placeholder="例如：60">
                </div>
                
                <div class="hint">輸入您希望達到的最低學期分數（通常為60分）</div>
                
                <!-- 下次考試預測的專用輸入區 -->
                <div id="predictionInputs">
                    <div class="input-row">
                        <label for="nextExamNumber">預測第幾次段考：</label>
                        <select id="nextExamNumber">
                            <option value="1">第一次段考</option>
                            <option value="2">第二次段考</option>
                            <option value="3" selected>第三次段考</option>
                        </select>
                    </div>
                    
                    <div class="input-row">
                        <label for="nextUsualNumber">預測第幾次平時：</label>
                        <select id="nextUsualNumber">
                            <option value="1">第一次平時</option>
                            <option value="2">第二次平時</option>
                            <option value="3" selected>第三次平時</option>
                        </select>
                    </div>
                </div>
                
                <div class="hint">選擇您要預測的考試與平時成績次數</div>
            </div>
            
            <div class="buttons">
                <button class="calculate-btn" id="calcPrediction">
                    <i class="fas fa-search"></i> 計算下次所需分數
                </button>
                <button class="reset-btn" id="resetAll">
                    <i class="fas fa-broom"></i> 全部重設
                </button>
            </div>
            
            <div class="result-box" id="resultPrediction">
                <div class="result-title">下次段考所需分數</div>
                <div class="result-value">--</div>
                <div class="result-note">根據目前成績與目標分數計算</div>
            </div>
            
            <!-- 預測圖片顯示區域 -->
            <div class="prediction-image" id="predictionImage">
                <div class="image-placeholder">
                    <i class="fas fa-image"></i>
                    <div>根據下次所需分數顯示對應圖片</div>
                </div>
            </div>
            
            <div class="prediction-info" id="predictionInfo">
                <p>此處將根據您下次段考所需分數顯示提示訊息。</p>
                <p>圖片區域預留給您根據不同分數範圍自訂圖片顯示：</p>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>10-50分：您可放置鼓勵學習的圖片</li>
                    <li>50-60分：您可放置進步空間的圖片</li>
                    <li>60-70分：您可放置達標的圖片</li>
                    <li>70-80分：您可放置良好的圖片</li>
                    <li>80-90分：您可放置優秀的圖片</li>
                    <li>90-100分：您可放置卓越的圖片</li>
                    <li>100分以上：您可放置挑戰極限的圖片</li>
                </ul>
            </div>
            
            <div class="result-box" id="resultYear">
                <div class="result-title">學年總成績</div>
                <div class="result-value">--</div>
                <div class="result-note">計算公式：第一學期成績 × 50% + 第二學期成績 × 50%</div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>© 2023 學期與學年成績計算器 | 本工具僅供參考，實際成績計算請以學校規定為準</p>
        <p>設計用於GitHub部署 | 使用HTML、CSS和JavaScript實現</p>
    </div>
    
    <script>
        // DOM元素
        const calcSemester1Btn = document.getElementById('calcSemester1');
        const calcSemester2Btn = document.getElementById('calcSemester2');
        const calcPredictionBtn = document.getElementById('calcPrediction');
        const resetSemester1Btn = document.getElementById('resetSemester1');
        const resetSemester2Btn = document.getElementById('resetSemester2');
        const resetAllBtn = document.getElementById('resetAll');
        
        const resultSemester1 = document.getElementById('resultSemester1');
        const resultSemester2 = document.getElementById('resultSemester2');
        const resultPrediction = document.getElementById('resultPrediction');
        const resultYear = document.getElementById('resultYear');
        const predictionImage = document.getElementById('predictionImage');
        const predictionInfo = document.getElementById('predictionInfo');
        
        // 第一學期成績計算
        calcSemester1Btn.addEventListener('click', () => {
            const exam1 = parseFloat(document.getElementById('exam1_1').value) || 0;
            const exam2 = parseFloat(document.getElementById('exam1_2').value) || 0;
            const exam3 = parseFloat(document.getElementById('exam1_3').value) || 0;
            
            const usual1 = parseFloat(document.getElementById('usual1_1').value) || 0;
            const usual2 = parseFloat(document.getElementById('usual1_2').value) || 0;
            const usual3 = parseFloat(document.getElementById('usual1_3').value) || 0;
            
            // 計算段考平均和平時平均
            const examAvg = calculateAverage([exam1, exam2, exam3]);
            const usualAvg = calculateAverage([usual1, usual2, usual3]);
            
            // 計算學期總成績 (段考72% + 平時28%)
            const semesterScore = (examAvg * 0.72) + (usualAvg * 0.28);
            
            // 顯示結果
            updateResult(resultSemester1, semesterScore);
            
            // 計算學年成績
            calculateYearGrade();
        });
        
        // 第二學期成績計算
        calcSemester2Btn.addEventListener('click', () => {
            const exam1 = parseFloat(document.getElementById('exam2_1').value) || 0;
            const exam2 = parseFloat(document.getElementById('exam2_2').value) || 0;
            const exam3 = parseFloat(document.getElementById('exam2_3').value) || 0;
            
            const usual1 = parseFloat(document.getElementById('usual2_1').value) || 0;
            const usual2 = parseFloat(document.getElementById('usual2_2').value) || 0;
            const usual3 = parseFloat(document.getElementById('usual2_3').value) || 0;
            
            // 計算段考平均和平時平均
            const examAvg = calculateAverage([exam1, exam2, exam3]);
            const usualAvg = calculateAverage([usual1, usual2, usual3]);
            
            // 計算學期總成績 (段考72% + 平時28%)
            const semesterScore = (examAvg * 0.72) + (usualAvg * 0.28);
            
            // 顯示結果
            updateResult(resultSemester2, semesterScore);
            
            // 計算學年成績
            calculateYearGrade();
        });
        
        // 計算平均值的輔助函數
        function calculateAverage(scores) {
            const validScores = scores.filter(score => score > 0);
            if (validScores.length === 0) return 0;
            return validScores.reduce((sum, score) => sum + score, 0) / validScores.length;
        }
        
        // 更新結果顯示的輔助函數
        function updateResult(resultElement, score) {
            const resultValue = resultElement.querySelector('.result-value');
            resultValue.textContent = score.toFixed(2);
            
            // 根據成績添加顏色標記
            if (score >= 90) {
                resultValue.className = 'result-value success';
            } else if (score >= 60) {
                resultValue.className = 'result-value info';
            } else {
                resultValue.className = 'result-value warning';
            }
        }
        
        // 計算學年成績
        function calculateYearGrade() {
            const semester1Value = resultSemester1.querySelector('.result-value').textContent;
            const semester2Value = resultSemester2.querySelector('.result-value').textContent;
            
            // 檢查兩個學期成績是否都已計算
            if (semester1Value === '--' || semester2Value === '--') {
                return;
            }
            
            const semester1Score = parseFloat(semester1Value);
            const semester2Score = parseFloat(semester2Value);
            
            // 計算學年總成績 (兩個學期平均)
            const yearScore = (semester1Score + semester2Score) / 2;
            
            // 顯示結果
            updateResult(resultYear, yearScore);
        }
        
        // 計算下次考試所需分數
        calcPredictionBtn.addEventListener('click', () => {
            const targetGrade = parseFloat(document.getElementById('targetGrade').value) || 60;
            const nextExamNum = parseInt(document.getElementById('nextExamNumber').value);
            const nextUsualNum = parseInt(document.getElementById('nextUsualNumber').value);
            
            // 獲取選擇的學期
            const selectedSemester = document.querySelector('input[name="predictSemester"]:checked').value;
            
            // 根據選擇的學期獲取對應的輸入元素
            let examInputs, usualInputs, semesterPrefix;
            
            if (selectedSemester === "1") {
                semesterPrefix = "1";
                examInputs = ['exam1_1', 'exam1_2', 'exam1_3'];
                usualInputs = ['usual1_1', 'usual1_2', 'usual1_3'];
            } else {
                semesterPrefix = "2";
                examInputs = ['exam2_1', 'exam2_2', 'exam2_3'];
                usualInputs = ['usual2_1', 'usual2_2', 'usual2_3'];
            }
            
            // 獲取已輸入的成績
            const enteredExams = [];
            const enteredUsuals = [];
            
            for (let i = 0; i < nextExamNum - 1; i++) {
                const score = parseFloat(document.getElementById(examInputs[i]).value) || 0;
                enteredExams.push(score);
            }
            
            for (let i = 0; i < nextUsualNum - 1; i++) {
                const score = parseFloat(document.getElementById(usualInputs[i]).value) || 0;
                enteredUsuals.push(score);
            }
            
            // 檢查是否有輸入成績
            if (enteredExams.length === 0 && enteredUsuals.length === 0) {
                alert("請先輸入已考試的成績！");
                return;
            }
            
            // 計算已考成績的平均
            const currentExamAvg = enteredExams.length > 0 ? 
                enteredExams.reduce((sum, score) => sum + score, 0) / enteredExams.length : 0;
                
            const currentUsualAvg = enteredUsuals.length > 0 ? 
                enteredUsuals.reduce((sum, score) => sum + score, 0) / enteredUsuals.length : 0;
            
            // 計算還需要多少次考試和平時成績
            const totalExams = 3;
            const totalUsuals = 3;
            
            const remainingExams = totalExams - enteredExams.length;
            const remainingUsuals = totalUsuals - enteredUsuals.length;
            
            // 計算下次考試所需分數
            // 公式：目標分數 = (已考段考平均 * 已考次數/總次數 * 0.72) + (下次段考分數 * 1/總次數 * 0.72) + 
            //        (已考平時平均 * 已考次數/總次數 * 0.28) + (下次平時分數 * 1/總次數 * 0.28)
            
            // 為了簡化，我們假設下次平時成績與目前平均相同
            // 計算下次段考所需分數
            const examWeightPerTest = 0.72 / totalExams;
            const usualWeightPerTest = 0.28 / totalUsuals;
            
            // 已考段考對總成績的貢獻
            const examContributionSoFar = currentExamAvg * enteredExams.length * examWeightPerTest;
            
            // 已考平時對總成績的貢獻
            const usualContributionSoFar = currentUsualAvg * enteredUsuals.length * usualWeightPerTest;
            
            // 假設下次平時成績與目前平均相同，計算其貢獻
            const nextUsualContribution = currentUsualAvg * usualWeightPerTest;
            
            // 計算下次段考所需分數
            let requiredScore;
            if (remainingExams > 0) {
                requiredScore = (targetGrade - examContributionSoFar - usualContributionSoFar - 
                               (nextUsualContribution * remainingUsuals)) / (remainingExams * examWeightPerTest);
            } else {
                // 所有考試都已考完
                const resultValue = resultPrediction.querySelector('.result-value');
                resultValue.textContent = "已無下次考試";
                resultValue.className = 'result-value info';
                
                // 更新圖片區域
                updatePredictionImage(0, "已無下次考試，學期成績已確定。");
                return;
            }
            
            // 顯示結果
            const resultValue = resultPrediction.querySelector('.result-value');
            
            if (requiredScore <= 0) {
                resultValue.textContent = "0分 (已達標)";
                resultValue.className = 'result-value success';
            } else if (requiredScore > 100) {
                resultValue.textContent = "100+分 (需滿分且可能無法達標)";
                resultValue.className = 'result-value warning';
            } else {
                resultValue.textContent = requiredScore.toFixed(2) + "分";
                
                // 根據所需分數設置顏色
                if (requiredScore < 60) {
                    resultValue.className = 'result-value success';
                } else if (requiredScore <= 80) {
                    resultValue.className = 'result-value info';
                } else {
                    resultValue.className = 'result-value warning';
                }
            }
            
            // 更新圖片區域
            updatePredictionImage(requiredScore, targetGrade);
        });
        
        // 根據預測分數更新圖片區域
        function updatePredictionImage(requiredScore, targetGrade) {
            let imageHTML = '';
            let message = '';
            
            if (requiredScore <= 0) {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-trophy" style="color:#27ae60;"></i>
                        <div>恭喜！您已達到目標分數 ${targetGrade} 分</div>
                    </div>
                `;
                message = "您已達到目標分數，保持下去！";
            } else if (requiredScore <= 50) {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-thumbs-up" style="color:#2ecc71;"></i>
                        <div>下次考試只需 ${requiredScore.toFixed(2)} 分即可達標</div>
                        <div style="margin-top:10px; font-size:0.9rem;">這在可達成的範圍內，加油！</div>
                    </div>
                `;
                message = "您只需較低分數即可達標，專心準備即可輕鬆過關。";
            } else if (requiredScore <= 60) {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-book" style="color:#3498db;"></i>
                        <div>下次考試需要 ${requiredScore.toFixed(2)} 分才能達標</div>
                        <div style="margin-top:10px; font-size:0.9rem;">需要認真準備，但完全可達成</div>
                    </div>
                `;
                message = "您需要認真準備下次考試，但這分數在合理範圍內。";
            } else if (requiredScore <= 70) {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-graduation-cap" style="color:#f39c12;"></i>
                        <div>下次考試需要 ${requiredScore.toFixed(2)} 分才能達標</div>
                        <div style="margin-top:10px; font-size:0.9rem;">需要加倍努力才能達到目標</div>
                    </div>
                `;
                message = "您需要較高的分數才能達標，建議加強弱科複習。";
            } else if (requiredScore <= 80) {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-running" style="color:#e67e22;"></i>
                        <div>下次考試需要 ${requiredScore.toFixed(2)} 分才能達標</div>
                        <div style="margin-top:10px; font-size:0.9rem;">需要非常努力，制定詳細複習計畫</div>
                    </div>
                `;
                message = "您需要很高的分數才能達標，必須制定詳細的複習計畫並嚴格執行。";
            } else if (requiredScore <= 90) {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-fire" style="color:#e74c3c;"></i>
                        <div>下次考試需要 ${requiredScore.toFixed(2)} 分才能達標</div>
                        <div style="margin-top:10px; font-size:0.9rem;">挑戰性高，需要全力以赴</div>
                    </div>
                `;
                message = "這是一個很高的目標分數，您需要全力以赴並考慮尋求額外幫助。";
            } else if (requiredScore <= 100) {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-bullseye" style="color:#c0392b;"></i>
                        <div>下次考試需要 ${requiredScore.toFixed(2)} 分才能達標</div>
                        <div style="margin-top:10px; font-size:0.9rem;">接近滿分，挑戰極限！</div>
                    </div>
                `;
                message = "您需要接近滿分的成績，這將是一個極大的挑戰。";
            } else {
                imageHTML = `
                    <div class="image-placeholder">
                        <i class="fas fa-exclamation-triangle" style="color:#c0392b;"></i>
                        <div>即使下次考滿分也無法達標</div>
                        <div style="margin-top:10px; font-size:0.9rem;">建議調整目標或尋求補救機會</div>
                    </div>
                `;
                message = "即使下次考試獲得滿分也無法達到目標，建議您與老師討論補救方案。";
            }
            
            predictionImage.innerHTML = imageHTML;
            predictionInfo.innerHTML = `<p><strong>提示：</strong> ${message}</p>`;
        }
        
        // 重設功能
        resetSemester1Btn.addEventListener('click', () => {
            document.querySelectorAll('#semester1 input').forEach(input => input.value = '');
            resultSemester1.querySelector('.result-value').textContent = '--';
            resultSemester1.querySelector('.result-value').className = 'result-value';
        });
        
        resetSemester2Btn.addEventListener('click', () => {
            document.querySelectorAll('#semester2 input').forEach(input => input.value = '');
            resultSemester2.querySelector('.result-value').textContent = '--';
            resultSemester2.querySelector('.result-value').className = 'result-value';
        });
        
        resetAllBtn.addEventListener('click', () => {
            // 清空所有輸入框
            document.querySelectorAll('input[type="number"]').forEach(input => {
                if (input.id !== 'targetGrade') {
                    input.value = '';
                }
            });
            
            // 重設選擇框
            document.getElementById('targetGrade').value = '60';
            document.getElementById('nextExamNumber').value = '3';
            document.getElementById('nextUsualNumber').value = '3';
            document.getElementById('predictSemester1').checked = true;
            
            // 重設所有結果顯示
            const resultValues = document.querySelectorAll('.result-value');
            resultValues.forEach(el => {
                el.textContent = '--';
                el.className = 'result-value';
            });
            
            // 重設圖片區域
            predictionImage.innerHTML = `
                <div class="image-placeholder">
                    <i class="fas fa-image"></i>
                    <div>根據下次所需分數顯示對應圖片</div>
                </div>
            `;
            
            predictionInfo.innerHTML = `
                <p>此處將根據您下次段考所需分數顯示提示訊息。</p>
                <p>圖片區域預留給您根據不同分數範圍自訂圖片顯示：</p>
